<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1e3a8a">
    <title>Foloneo - G√©n√©rateur de Devis Pro</title>
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%231e3a8a' width='100' height='100'/><text y='75' font-size='80' fill='white' font-family='Arial'>F</text></svg>">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
        <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            overscroll-behavior: none;
            background: radial-gradient(circle at 10% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 25%),
                        radial-gradient(circle at 90% 10%, rgba(16, 185, 129, 0.18) 0%, transparent 22%),
                        radial-gradient(circle at 50% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 30%),
                        #0b1224;
            color: #e5e7eb;
        }

        .foloneo-gradient {
            background: linear-gradient(120deg, #0ea5e9 0%, #6366f1 45%, #14b8a6 100%);
            box-shadow: 0 12px 40px rgba(14, 165, 233, 0.35);
        }

        input, select, textarea, button {
            font-size: 16px;
        }

        .mobile-optimized {
            touch-action: manipulation;
        }

        @media (max-width: 768px) {
            .hide-mobile {
                display: none;
            }
        }

        .mobile-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 8px 0;
            z-index: 50;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 769px) {
            .mobile-menu {
                display: none;
            }
        }

        .content-with-mobile-menu {
            padding-bottom: 80px;
        }

        /* Neo-brutalism inspired cards */
        .neo-card {
            position: relative;
            overflow: hidden;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(18px);
            border-radius: 22px;
            transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;
        }

        .neo-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.2), transparent 40%),
                        radial-gradient(circle at 80% 0%, rgba(16, 185, 129, 0.2), transparent 35%);
            opacity: 0.6;
        }

        .neo-card:hover {
            transform: translateY(-6px) scale(1.01);
            border-color: rgba(125, 211, 252, 0.35);
            box-shadow: 0 18px 55px rgba(0, 0, 0, 0.45);
        }

        .neo-card > * {
            position: relative;
            z-index: 1;
        }

        /* Futuristic buttons */
        .pulse-button {
            position: relative;
            overflow: hidden;
            background: linear-gradient(120deg, #0ea5e9, #6366f1, #22d3ee);
            color: white;
            border: none;
            border-radius: 14px;
            padding: 14px 18px;
            font-weight: 700;
            letter-spacing: 0.01em;
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.35);
            transition: transform 0.2s ease, box-shadow 0.25s ease;
        }

        .pulse-button::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.35), transparent 40%);
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .pulse-button:hover {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 15px 35px rgba(34, 211, 238, 0.4);
        }

        .pulse-button:active {
            transform: translateY(0) scale(0.99);
        }

        .pulse-button:hover::after {
            opacity: 1;
        }

        .glow-border {
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04), 0 20px 60px rgba(14, 165, 233, 0.15);
        }

        .floating-shape {
            position: absolute;
            inset: -40px;
            background: radial-gradient(circle, rgba(125, 211, 252, 0.15), transparent 50%);
            filter: blur(35px);
            animation: floaty 12s ease-in-out infinite;
        }

        @keyframes floaty {
            0% { transform: translate3d(0, 0, 0); }
            50% { transform: translate3d(18px, -12px, 0) scale(1.05); }
            100% { transform: translate3d(0, 0, 0); }
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.65rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 0.85rem;
            color: #e5e7eb;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.14);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Animations pour le bouton + */
        @keyframes buttonPulse {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        @keyframes successPulse {
            0% { transform: scale(1); background-color: #2563eb; }
            50% { transform: scale(1.1); background-color: #10b981; }
            100% { transform: scale(1); background-color: #2563eb; }
        }

        .btn-add-product {
            transition: all 0.2s ease;
        }

        .btn-add-product:active {
            animation: buttonPulse 0.3s ease;
        }

        .btn-add-product.added {
            animation: successPulse 0.5s ease;
        }

        /* Toast notification */
        .toast-notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            box-shadow: 0 14px 30px rgba(22, 163, 74, 0.35);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
            animation: slideInRight 0.3s ease, slideOutRight 0.3s ease 2.7s;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        /* Badge panier avec animation */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: cartBounce 0.5s ease;
        }

        @keyframes cartBounce {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.3); }
            50% { transform: scale(0.9); }
            75% { transform: scale(1.1); }
        }

        /* Animation de la ligne de produit ajout√©e */
        @keyframes highlightProduct {
            0% { background-color: #f3f4f6; }
            50% { background-color: #d1fae5; }
            100% { background-color: #f3f4f6; }
        }

        .product-added {
            animation: highlightProduct 1s ease;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Donn√©es produits Ajax
        const ajaxProducts = [
            { id: 'ajax1', name: 'Hub', category: 'Centrales', price: 108.09, description: 'Centrale IP-GPRS 2G - Ethernet - Gsm/Gprs  (alimentation et cable ethernet fournie)' },
            { id: 'ajax2', name: 'Hub 2', category: 'Centrales', price: 151.79, description: 'Centrale IP-GPRS 2G (compatible MotionCam) - Ethernet - Gsm/Gprs  (alimentation et cable ethernet fo...' },
            { id: 'ajax3', name: 'Hub 2 - 4G', category: 'Centrales', price: 227.13, description: 'Centrale IP-GPRS 4G (compatible MotionCam) - Ethernet - Gsm/Gprs  (alimentation et cable ethernet fo...' },
            { id: 'ajax4', name: 'Hub 2 Plus', category: 'Centrales', price: 259.4, description: 'Centrale IP-GPRS 2G/3G/4G Compatible MotionCam) - Ethernet -module wifi integr√© - Gsm/Gprs  (aliment...' },
            { id: 'ajax5', name: 'DoorProtect', category: 'D√©tecteurs d\'ouverture', price: 23.9, description: 'Detecteur d\'ouverture  - Deux aimants - CR123A batterie (pr√©-install√©e) - 1 entr√©e contact sec' },
            { id: 'ajax6', name: 'DoorProtectPlus', category: 'D√©tecteurs d\'ouverture', price: 35.88, description: 'Detecteur d\'ouverture, de vibration et d\'inclinaison - Deux aimants - CR123A batterie (pr√©-install√©e...' },
            { id: 'ajax7', name: 'MotionProtect', category: 'D√©tecteurs de mouvement', price: 40.55, description: 'Detecteur infrarouge - Anti animaux - CR123A batterie (pr√©-install√©e)' },
            { id: 'ajax8', name: 'MotionProtect Plus', category: 'D√©tecteurs de mouvement', price: 55.64, description: 'Detecteur infrarouge double technologie -  Anti animaux - CR123A batterie (pr√©-install√©e)' },
            { id: 'ajax9', name: 'CombiProtect', category: 'D√©tecteurs de mouvement', price: 56.12, description: 'Detecteur infrarouge et bris de vitre -  Anti animaux - CR123A batterie (pr√©-install√©e)' },
            { id: 'ajax10', name: 'MotionProtect Outdoor', category: 'D√©tecteurs de mouvement', price: 140.31, description: 'Detecteur infrarouge exterieur          - Double faisceau           - Anti-mask          - Anti anim...' },
            { id: 'ajax11', name: 'Curtainprotect', category: 'D√©tecteurs de mouvement', price: 47.27, description: 'D√©tecteur PIR de type rideau Ajax  Port√©e de d√©tection configurable de 6 √† 15 m' },
            { id: 'ajax12', name: 'DualCurtain Outdoor', category: 'D√©tecteurs de mouvement', price: 143.45, description: 'Detecteur infrarouge exterieur rideau          -4 capteurs PIR           - Anti-mask           - det...' },
            { id: 'ajax13', name: 'Curtain Outdoor Jeweller', category: 'D√©tecteurs de mouvement', price: 102.6, description: '' },
            { id: 'ajax14', name: 'MotionCam', category: 'D√©tecteurs cam√©ra', price: 92.52, description: 'Detecteur infrarouge avec camera - Anti animaux - 2 CR123A batterie (pr√©-install√©e)' },
            { id: 'ajax15', name: 'MotionCam Outdoor', category: 'D√©tecteurs cam√©ra', price: 172.58, description: 'Detecteur infrarouge cam√©ra exterieur         - Double faisceau              -  Anti Animaux        ...' },
            { id: 'ajax16', name: 'GlassProtect', category: 'D√©tecteurs bris de vitre', price: 40.55, description: 'Detecteur de bris de vitre - 1 entr√©e contact sec - CR123A batterie (pr√©-install√©e)' },
            { id: 'ajax17', name: 'FireProtect', category: 'D√©tecteurs incendie', price: 47.27, description: 'Detecteur de fum√©e - capteur de temp√©rature integr√© - 2 x piles de CR2032 (pr√©install√©e)' },
            { id: 'ajax18', name: 'FireProtect Plus', category: 'D√©tecteurs incendie', price: 72.24, description: 'Detecteur de fum√©e et CO2 - capteur de temp√©rature integr√© - 2 x piles de CR2032 (pr√©install√©e)' },
            { id: 'ajax19', name: 'LeaksProtect', category: 'D√©tecteurs inondation', price: 32.22, description: 'Detecteur d\'innondation - Deux piles AAA (pr√©install√©es)' },
            { id: 'ajax20', name: 'StreetSiren', category: 'Sir√®nes', price: 176.74, description: 'Sir√®ne exterieure avec flash     - Quatre CR123A batteries (pr√©-install√©es)' },
            { id: 'ajax21', name: 'StreetSirenPlus NFA2P', category: 'Sir√®nes', price: 137.25, description: 'Sir√®ne exterieure NFA2P avec flash     - Quatre CR123A batteries (pr√©-install√©es)' },
            { id: 'ajax22', name: 'StreetSirencustom', category: 'Sir√®nes', price: 79.53, description: 'Sir√®ne exterieure avec flash avec couvercle personnalisable     - Quatre CR123A batteries (pr√©-insta...' },
            { id: 'ajax23', name: 'HomeSIren', category: 'Sir√®nes', price: 40.55, description: 'Sir√®ne interieure     - Deux CR123A batteries (pr√©-install√©es)' },
            { id: 'ajax24', name: 'KeyPad', category: 'Claviers', price: 63.93, description: 'Clavier tactile - 4 piles AAA (pr√©install√©es)' },
            { id: 'ajax25', name: 'KeyPad Plus', category: 'Claviers', price: 81.05, description: 'Clavier tactile avec lecteur de badge - 4 piles AAA (pr√©install√©es)' },
            { id: 'ajax26', name: 'SpaceControl', category: 'T√©l√©commandes', price: 20.27, description: 'T√©l√©commande 4 boutons bidirectionnelle - CR123A batterie (pr√©-install√©e)' },
            { id: 'ajax27', name: 'Rex / Range extender', category: 'R√©p√©teurs', price: 80.59, description: 'R√©p√©teur radio' },
            { id: 'ajax28', name: 'Rex 2/ Range extender', category: 'R√©p√©teurs', price: 115.37, description: 'R√©p√©teur radio comptatible photos' },
            { id: 'ajax29', name: 'WallSwitch', category: 'Relais et modules', price: 28.6, description: 'Relais de controle √† distance 110~240v - Compteur de consommation' },
            { id: 'ajax30', name: 'Relay', category: 'Relais et modules', price: 28.6, description: 'Relais de controle √† distance (contact sec) - Entr√©e d\'alimentation 7~24V' },
            { id: 'ajax31', name: 'Multitransmitter-3EOL', category: 'Relais et modules', price: 99.81, description: 'Module qui permet l\'int√©gration au syst√®me  Ajax d\'appareils tiers c√¢bl√©s 18 zones' },
            { id: 'ajax32', name: 'DC12V-PCB2', category: 'Relais et modules', price: 16.08, description: 'Module d\'alimentation 12 VDC Compatible avec Ajax le Hub 2 Tension d\'entr√©e 8~20 VDC' },
            { id: 'ajax33', name: 'DC6V-PCB2', category: 'Relais et modules', price: 16.08, description: 'Module d\'alimentation 12 VDC Compatible avec Ajax le Hub 2 et rex 2 Tension d\'entr√©e 4~20 VDC' },
            { id: 'ajax34', name: 'Socket', category: 'Relais et modules', price: 49.88, description: 'Prise intelligente connect√©e' },
            { id: 'ajax35', name: 'Transmitter', category: 'Relais et modules', price: 32.22, description: 'Transmetteur universel - entr√©e filaire et autoprotection (accelerometre) - 3 piles CR2032 (pr√©insta...' },
            { id: 'ajax36', name: 'Button', category: 'Boutons panic', price: 20.28, description: 'Bouton panic' },
            { id: 'ajax37', name: 'Doublebutton', category: 'Boutons panic', price: 20.28, description: 'Double Bouton panic' },
            { id: 'ajax38', name: 'Hood', category: 'Accessoires', price: 7.8, description: 'Casquette de protection pour Motionprotect Outdoor' },
            { id: 'ajax39', name: 'TAG', category: 'Accessoires', price: 40.55, description: 'Tag d\'acc√®s pour Keypad plus - lot de10' },
            { id: 'ajax40', name: 'PASS', category: 'Accessoires', price: 37.94, description: 'Pass d\'acc√®s pour Keypad plus - lot de10' },
            { id: 'ajax41', name: 'DinHolder', category: 'Accessoires', price: 6.0, description: 'Support pour rail Din' },
            { id: 'ajax42', name: 'Brandplates', category: 'Accessoires', price: 51.98, description: 'Pack de 10 couvercles personnalisable' },
            { id: 'ajax43', name: 'Holder', category: 'Accessoires', price: 3.66, description: 'Support pour bouton d\'urgence' },
            { id: 'ajax44', name: 'MB100', category: 'Accessoires', price: 16.2, description: 'Rotule de fixation a fixer sur les MOTIONCAMOUTDOOR' },
            { id: 'ajax45', name: 'XTO 2.0', category: 'Kits', price: 459.0, description: 'XTO 2.0 KIT CHANTIER - 1 coffret 430x330x200 preperc√© avec serrure √† monter - 1 centrale Hub2 - 1 mo...' },
            { id: 'ajax46', name: 'XTO 2.0 - 4G', category: 'Kits', price: 535.5, description: 'XTO 2.0 -4G KIT CHANTIER - 1 coffret 430x330x200 preperc√© avec serrure √† monter - 1 centrale Hub2 - ...' },
            { id: 'ajax47', name: 'REX2 XTENDER', category: 'Kits', price: 423.0, description: 'KIT REX2 XTENDER ( pour augmenter la port√©e radio) - 1 coffret 430x330x200 preperc√© avec serrure √† m...' },
            { id: 'ajax48', name: 'COFFRET', category: 'Kits', price: 166.5, description: 'COFFRET SEUL               - 1 coffret 430x330x200 preperc√©                                    -  1 ...' },
            { id: 'ajax49', name: 'PILE 6V 960AH', category: 'Kits', price: 134.1, description: 'PILE 6V 960AH ZINC AIR (a utilisation unique) Autonomie moyenne de 14 mois' },
            { id: 'ajax50', name: 'Lifequality', category: 'Nouveaut√©s', price: 208.47, description: 'Moniteur de temp√©rature, humidit√© et CO2' },
            { id: 'ajax51', name: 'Lightcore - 1G', category: 'Nouveaut√©s', price: 46.65, description: 'Interrupteur simple' },
            { id: 'ajax52', name: 'Lightcore - 2G', category: 'Nouveaut√©s', price: 53.78, description: 'Interrupteur double' },
            { id: 'ajax53', name: 'Lightcore - 2W', category: 'Nouveaut√©s', price: 49.98, description: 'Interrupteur va et vient' },
            { id: 'ajax54', name: 'SOLOBUTTON - 1G2W', category: 'Nouveaut√©s', price: 8.09, description: 'Panneau tactil pour interrupteur   compatible Lightcore 1G et Lightcore-2W' },
            { id: 'ajax55', name: 'SOLOBUTTON - 2G', category: 'Nouveaut√©s', price: 9.05, description: 'Panneau tactil pour interrupteur   compatible Lightcore 2G' }
        ];

        // Donn√©es produits Dahua
        const dahuaProducts = [
            { id: 'dahua1', name: 'NVR 4 canaux', category: 'Enregistreurs', price: 299, description: 'Enregistreur 4K, 4 cam√©ras IP' },
            { id: 'dahua2', name: 'NVR 8 canaux', category: 'Enregistreurs', price: 449, description: 'Enregistreur 4K, 8 cam√©ras IP' },
            { id: 'dahua3', name: 'Cam√©ra D√¥me 4MP', category: 'Cam√©ras', price: 159, description: 'Cam√©ra d√¥me int√©rieure/ext√©rieure 4MP' },
            { id: 'dahua4', name: 'Cam√©ra Tube 4MP', category: 'Cam√©ras', price: 179, description: 'Cam√©ra tube IR 30m, 4MP' },
            { id: 'dahua5', name: 'Cam√©ra PTZ 2MP', category: 'Cam√©ras', price: 599, description: 'Cam√©ra motoris√©e zoom x20' },
            { id: 'dahua6', name: 'Disque dur 2To', category: 'Accessoires', price: 89, description: 'HDD surveillance 2To' },
            { id: 'dahua7', name: 'Switch PoE 8 ports', category: 'Accessoires', price: 149, description: 'Switch avec alimentation PoE' },
            { id: 'dahua8', name: '√âcran 22" LED', category: 'Accessoires', price: 199, description: 'Moniteur Full HD pour surveillance' }
        ];

        // Initialisation des donn√©es
        const initializeData = () => {
            // Utilisateurs
            if (!localStorage.getItem('foloneo_users')) {
                const defaultUsers = [{
                    id: '1',
                    username: 'admin',
                    password: 'admin123',
                    email: 'admin@foloneo.fr',
                    role: 'admin',
                    active: true,
                    createdAt: new Date().toISOString()
                }];
                localStorage.setItem('foloneo_users', JSON.stringify(defaultUsers));
            }

            // Produits Ajax
            if (!localStorage.getItem('foloneo_ajax_products')) {
                localStorage.setItem('foloneo_ajax_products', JSON.stringify(ajaxProducts));
            }

            // Produits Dahua
            if (!localStorage.getItem('foloneo_dahua_products')) {
                localStorage.setItem('foloneo_dahua_products', JSON.stringify(dahuaProducts));
            }

            // Devis
            if (!localStorage.getItem('foloneo_quotes')) {
                localStorage.setItem('foloneo_quotes', JSON.stringify([]));
            }
        };

        // √âcran de connexion
        function LoginScreen({ onLogin }) {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleLogin = (e) => {
                e.preventDefault();
                setError('');

                const users = JSON.parse(localStorage.getItem('foloneo_users') || '[]');
                const user = users.find(u => u.username.toLowerCase() === username.toLowerCase());

                if (!user) {
                    setError('Identifiant incorrect');
                    return;
                }

                if (user.password !== password) {
                    setError('Mot de passe incorrect');
                    return;
                }

                if (!user.active) {
                    setError('Compte d√©sactiv√©');
                    return;
                }

                localStorage.setItem('foloneo_current_user', JSON.stringify(user));
                onLogin(user);
            };

            return (
                <div className="min-h-screen relative overflow-hidden flex items-center justify-center p-4 foloneo-gradient">
                    <div className="floating-shape"></div>
                    <div className="floating-shape" style={{ animationDelay: '2s', opacity: 0.35 }}></div>
                    <div className="neo-card w-full max-w-5xl grid md:grid-cols-2 gap-6 p-10">
                        <div className="space-y-6">
                            <p className="text-sm uppercase tracking-[0.35em] text-blue-100">Bienvenue</p>
                            <h1 className="text-4xl md:text-5xl font-extrabold text-white leading-tight">
                                Foloneo, votre studio de devis express
                            </h1>
                            <p className="text-blue-50 text-lg">
                                Connectez-vous pour g√©n√©rer vos propositions, g√©rer vos produits et piloter votre activit√© dans une interface ultra fluide.
                            </p>
                            <div className="flex items-center gap-3 text-blue-50">
                                <div className="w-12 h-12 rounded-2xl bg-white/10 flex items-center justify-center text-2xl">‚ö°Ô∏è</div>
                                <div>
                                    <div className="font-semibold">Animations tactiles et exp√©rience 3D</div>
                                    <p className="text-sm text-blue-100">Chaque bouton r√©agit instantan√©ment pour des interactions plus vivantes.</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white/5 border border-white/10 rounded-2xl p-6 shadow-2xl backdrop-blur">
                            <div className="flex items-center gap-3 mb-6">
                                <div className="w-12 h-12 rounded-xl bg-white flex items-center justify-center">
                                    <span className="text-2xl font-black text-blue-600">F</span>
                                </div>
                                <div>
                                    <p className="text-sm text-blue-100">Connexion s√©curis√©e</p>
                                    <h2 className="text-2xl font-bold text-white">Espace professionnel</h2>
                                </div>
                            </div>

                            <form onSubmit={handleLogin} className="space-y-5">
                                <div className="space-y-2">
                                    <label className="block text-sm font-semibold text-blue-100">Identifiant</label>
                                    <input
                                        type="text"
                                        value={username}
                                        onChange={(e) => setUsername(e.target.value)}
                                        className="w-full px-4 py-3 bg-white/90 text-gray-800 rounded-xl focus:ring-4 focus:ring-blue-400 outline-none"
                                        placeholder="Votre identifiant"
                                        required
                                    />
                                </div>

                                <div className="space-y-2">
                                    <label className="block text-sm font-semibold text-blue-100">Mot de passe</label>
                                    <input
                                        type="password"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        className="w-full px-4 py-3 bg-white/90 text-gray-800 rounded-xl focus:ring-4 focus:ring-blue-400 outline-none"
                                        placeholder="Votre mot de passe"
                                        required
                                    />
                                </div>

                                {error && (
                                    <div className="bg-red-500/10 border border-red-500/30 text-red-100 px-4 py-3 rounded-lg text-sm">
                                        {error}
                                    </div>
                                )}

                                <button
                                    type="submit"
                                    className="w-full pulse-button mobile-optimized text-base"
                                >
                                    Se connecter
                                </button>

                                <div className="text-center text-sm text-blue-100">
                                    La cr√©ation de compte se fait d√©sormais depuis le menu principal une fois connect√©.
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            );
        }

        // Dashboard
        function Dashboard({ quotes }) {
            const totalQuotes = quotes.length;
            const totalRevenue = quotes.reduce((sum, q) => sum + q.total, 0);
            const avgQuote = totalQuotes > 0 ? totalRevenue / totalQuotes : 0;

            return (
                <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800">üìä Tableau de bord</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div className="bg-white p-6 rounded-xl shadow-lg border-l-4 border-blue-500">
                            <div className="text-sm text-gray-600 mb-1">Total Devis</div>
                            <div className="text-3xl font-bold text-gray-800">{totalQuotes}</div>
                        </div>
                        
                        <div className="bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500">
                            <div className="text-sm text-gray-600 mb-1">Chiffre d'affaires</div>
                            <div className="text-3xl font-bold text-gray-800">{totalRevenue.toFixed(0)} ‚Ç¨</div>
                        </div>
                        
                        <div className="bg-white p-6 rounded-xl shadow-lg border-l-4 border-purple-500">
                            <div className="text-sm text-gray-600 mb-1">Devis moyen</div>
                            <div className="text-3xl font-bold text-gray-800">{avgQuote.toFixed(0)} ‚Ç¨</div>
                        </div>
                    </div>

                    {quotes.length > 0 ? (
                        <div className="bg-white p-6 rounded-xl shadow-lg">
                            <h3 className="text-lg font-bold text-gray-800 mb-4">üìã Derniers devis</h3>
                            <div className="space-y-3">
                                {quotes.slice(-5).reverse().map(quote => (
                                    <div key={quote.id} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                        <div>
                                            <div className="font-semibold text-gray-800">{quote.clientName}</div>
                                            <div className="text-sm text-gray-600">{new Date(quote.date).toLocaleDateString('fr-FR')}</div>
                                        </div>
                                        <div className="text-lg font-bold text-blue-600">{quote.total.toFixed(2)} ‚Ç¨</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ) : (
                        <div className="bg-white p-6 rounded-xl shadow-lg text-center">
                            <div className="text-6xl mb-4">üìù</div>
                            <h3 className="text-lg font-bold text-gray-800 mb-2">Aucun devis pour le moment</h3>
                            <p className="text-gray-600">Cr√©ez votre premier devis pour commencer !</p>
                        </div>
                    )}
                </div>
            );
        }

        // Cr√©ation de devis
        function QuoteCreator({ ajaxProducts, dahuaProducts, onSave, onBack }) {
            const [clientName, setClientName] = useState('');
            const [clientAddress, setClientAddress] = useState('');
            const [clientPhone, setClientPhone] = useState('');
            const [cart, setCart] = useState([]);
            const [discount, setDiscount] = useState(0);
            const [activeTab, setActiveTab] = useState('ajax');
            const [toast, setToast] = useState(null);
            const [addedProductId, setAddedProductId] = useState(null);

            const products = activeTab === 'ajax' ? ajaxProducts : dahuaProducts;

            const showToast = (productName) => {
                setToast(productName);
                setTimeout(() => setToast(null), 3000);
            };

            const addToCart = (product) => {
                // Animation du bouton
                setAddedProductId(product.id);
                setTimeout(() => setAddedProductId(null), 500);

                const existing = cart.find(item => item.id === product.id);
                if (existing) {
                    setCart(cart.map(item => 
                        item.id === product.id ? {...item, quantity: item.quantity + 1} : item
                    ));
                    showToast(`${product.name} x${existing.quantity + 1}`);
                } else {
                    setCart([...cart, {...product, quantity: 1}]);
                    showToast(`${product.name} ajout√©`);
                }
            };

            const updateQuantity = (id, quantity) => {
                if (quantity <= 0) {
                    setCart(cart.filter(item => item.id !== id));
                } else {
                    setCart(cart.map(item => 
                        item.id === id ? {...item, quantity} : item
                    ));
                }
            };

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const discountAmount = subtotal * (discount / 100);
            const total = subtotal - discountAmount;

            const handleSave = () => {
                if (!clientName) {
                    alert('Veuillez entrer le nom du client');
                    return;
                }
                if (cart.length === 0) {
                    alert('Ajoutez des produits au devis');
                    return;
                }

                const quote = {
                    id: Date.now().toString(),
                    date: new Date().toISOString(),
                    clientName,
                    clientAddress,
                    clientPhone,
                    items: cart,
                    subtotal,
                    discount,
                    discountAmount,
                    total
                };

                onSave(quote);
                
                // Reset
                setClientName('');
                setClientAddress('');
                setClientPhone('');
                setCart([]);
                setDiscount(0);
            };

            return (
                <div className="space-y-6">
                    {/* Toast notification */}
                    {toast && (
                        <div className="toast-notification">
                            <span className="text-2xl">‚úì</span>
                            <span className="font-semibold">{toast}</span>
                        </div>
                    )}

                    <div className="flex items-center justify-between">
                        <h2 className="text-2xl font-bold text-gray-800">üìù Nouveau Devis</h2>
                        <button onClick={onBack} className="back-button">
                            ‚Üê Retour
                        </button>
                    </div>

                    {/* Infos client */}
                    <div className="bg-white p-6 rounded-xl shadow-lg">
                        <h3 className="text-lg font-bold text-gray-800 mb-4">üë§ Informations Client</h3>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Nom du client *</label>
                                <input
                                    type="text"
                                    value={clientName}
                                    onChange={(e) => setClientName(e.target.value)}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="Nom complet"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Adresse</label>
                                <input
                                    type="text"
                                    value={clientAddress}
                                    onChange={(e) => setClientAddress(e.target.value)}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="Adresse compl√®te"
                                />
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone</label>
                                <input
                                    type="tel"
                                    value={clientPhone}
                                    onChange={(e) => setClientPhone(e.target.value)}
                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="06 12 34 56 78"
                                />
                            </div>
                        </div>
                    </div>

                    {/* S√©lection produits */}
                    <div className="bg-white p-6 rounded-xl shadow-lg">
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-bold text-gray-800">üõí Produits</h3>
                            {cart.length > 0 && (
                                <div className="relative">
                                    <span className="text-2xl">üõí</span>
                                    <span className="cart-badge">{cart.length}</span>
                                </div>
                            )}
                        </div>
                        
                        <div className="flex space-x-2 mb-4">
                            <button
                                onClick={() => setActiveTab('ajax')}
                                className={`flex-1 py-2 px-4 rounded-lg font-semibold transition ${
                                    activeTab === 'ajax' 
                                    ? 'bg-blue-600 text-white' 
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                }`}
                            >
                                Ajax System
                            </button>
                            <button
                                onClick={() => setActiveTab('dahua')}
                                className={`flex-1 py-2 px-4 rounded-lg font-semibold transition ${
                                    activeTab === 'dahua' 
                                    ? 'bg-blue-600 text-white' 
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                }`}
                            >
                                Dahua
                            </button>
                        </div>

                        <div className="space-y-2 max-h-64 overflow-y-auto">
                            {products.map(product => (
                                <div key={product.id} className={`flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition ${addedProductId === product.id ? 'product-added' : ''}`}>
                                    <div className="flex-1">
                                        <div className="font-semibold text-gray-800">{product.name}</div>
                                        <div className="text-sm text-gray-600">{product.description}</div>
                                        <div className="text-sm font-bold text-blue-600">{product.price} ‚Ç¨</div>
                                    </div>
                                    <button
                                        onClick={() => addToCart(product)}
                                        className={`btn-add-product bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition mobile-optimized font-bold text-lg ${addedProductId === product.id ? 'added' : ''}`}
                                    >
                                        +
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Panier */}
                    {cart.length > 0 && (
                        <div className="bg-white p-6 rounded-xl shadow-lg">
                            <h3 className="text-lg font-bold text-gray-800 mb-4">üõçÔ∏è Panier ({cart.length})</h3>
                            <div className="space-y-3">
                                {cart.map(item => (
                                    <div key={item.id} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                        <div className="flex-1">
                                            <div className="font-semibold text-gray-800">{item.name}</div>
                                            <div className="text-sm text-gray-600">{item.price} ‚Ç¨ √ó {item.quantity}</div>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <button
                                                onClick={() => updateQuantity(item.id, item.quantity - 1)}
                                                className="w-8 h-8 bg-gray-200 rounded-lg hover:bg-gray-300 font-bold"
                                            >
                                                -
                                            </button>
                                            <span className="w-8 text-center font-bold">{item.quantity}</span>
                                            <button
                                                onClick={() => updateQuantity(item.id, item.quantity + 1)}
                                                className="w-8 h-8 bg-gray-200 rounded-lg hover:bg-gray-300 font-bold"
                                            >
                                                +
                                            </button>
                                            <div className="w-20 text-right font-bold text-blue-600">
                                                {(item.price * item.quantity).toFixed(2)} ‚Ç¨
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="mt-6 space-y-3 border-t pt-4">
                                <div className="flex items-center space-x-3">
                                    <label className="text-sm font-medium text-gray-700">Remise %</label>
                                    <input
                                        type="number"
                                        value={discount}
                                        onChange={(e) => setDiscount(Math.max(0, Math.min(100, Number(e.target.value))))}
                                        className="w-24 px-3 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500"
                                        min="0"
                                        max="100"
                                    />
                                </div>
                                
                                <div className="flex justify-between text-gray-700">
                                    <span>Sous-total:</span>
                                    <span className="font-semibold">{subtotal.toFixed(2)} ‚Ç¨</span>
                                </div>
                                
                                {discount > 0 && (
                                    <div className="flex justify-between text-red-600">
                                        <span>Remise ({discount}%):</span>
                                        <span className="font-semibold">-{discountAmount.toFixed(2)} ‚Ç¨</span>
                                    </div>
                                )}
                                
                                <div className="flex justify-between text-xl font-bold text-gray-800 border-t pt-3">
                                    <span>TOTAL:</span>
                                    <span className="text-blue-600">{total.toFixed(2)} ‚Ç¨</span>
                                </div>
                            </div>

                            <button
                                onClick={handleSave}
                                className="w-full mt-6 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition mobile-optimized"
                            >
                                üíæ Enregistrer le devis
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // Gestion produits
        function ProductsManager({ ajaxProducts, dahuaProducts, onUpdate, onBack }) {
            const [activeTab, setActiveTab] = useState('ajax');
            const [editingId, setEditingId] = useState(null);
            const [editForm, setEditForm] = useState({});

            const products = activeTab === 'ajax' ? ajaxProducts : dahuaProducts;

            const startEdit = (product) => {
                setEditingId(product.id);
                setEditForm({...product});
            };

            const saveEdit = () => {
                const key = activeTab === 'ajax' ? 'foloneo_ajax_products' : 'foloneo_dahua_products';
                const allProducts = JSON.parse(localStorage.getItem(key) || '[]');
                const updated = allProducts.map(p => p.id === editingId ? editForm : p);
                localStorage.setItem(key, JSON.stringify(updated));
                onUpdate();
                setEditingId(null);
            };

            return (
                <div className="space-y-6">
                    <div className="flex items-center justify-between">
                        <h2 className="text-2xl font-bold text-gray-800">üì¶ Gestion des Produits</h2>
                        <button onClick={onBack} className="back-button">
                            ‚Üê Retour
                        </button>
                    </div>

                    <div className="flex space-x-2">
                        <button
                            onClick={() => setActiveTab('ajax')}
                            className={`flex-1 py-2 px-4 rounded-lg font-semibold ${
                                activeTab === 'ajax' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'
                            }`}
                        >
                            Ajax ({ajaxProducts.length})
                        </button>
                        <button
                            onClick={() => setActiveTab('dahua')}
                            className={`flex-1 py-2 px-4 rounded-lg font-semibold ${
                                activeTab === 'dahua' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'
                            }`}
                        >
                            Dahua ({dahuaProducts.length})
                        </button>
                    </div>

                    <div className="space-y-3">
                        {products.map(product => (
                            <div key={product.id} className="bg-white p-4 rounded-xl shadow-lg">
                                {editingId === product.id ? (
                                    <div className="space-y-3">
                                        <input
                                            type="text"
                                            value={editForm.name}
                                            onChange={(e) => setEditForm({...editForm, name: e.target.value})}
                                            className="w-full px-3 py-2 border rounded-lg"
                                            placeholder="Nom"
                                        />
                                        <input
                                            type="text"
                                            value={editForm.description}
                                            onChange={(e) => setEditForm({...editForm, description: e.target.value})}
                                            className="w-full px-3 py-2 border rounded-lg"
                                            placeholder="Description"
                                        />
                                        <input
                                            type="number"
                                            value={editForm.price}
                                            onChange={(e) => setEditForm({...editForm, price: Number(e.target.value)})}
                                            className="w-full px-3 py-2 border rounded-lg"
                                            placeholder="Prix"
                                        />
                                        <div className="flex space-x-2">
                                            <button
                                                onClick={saveEdit}
                                                className="flex-1 bg-green-600 text-white py-2 rounded-lg"
                                            >
                                                ‚úì Sauvegarder
                                            </button>
                                            <button
                                                onClick={() => setEditingId(null)}
                                                className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg"
                                            >
                                                ‚úó Annuler
                                            </button>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="flex justify-between items-center">
                                        <div>
                                            <div className="font-bold text-gray-800">{product.name}</div>
                                            <div className="text-sm text-gray-600">{product.description}</div>
                                            <div className="text-sm font-bold text-blue-600">{product.price} ‚Ç¨</div>
                                        </div>
                                        <button
                                            onClick={() => startEdit(product)}
                                            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
                                        >
                                            ‚úèÔ∏è Modifier
                                        </button>
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Gestion utilisateurs (Admin)
        function UsersManager({ currentUser, onBack }) {
            const [users, setUsers] = useState([]);

            useEffect(() => {
                loadUsers();
            }, []);

            const loadUsers = () => {
                const data = JSON.parse(localStorage.getItem('foloneo_users') || '[]');
                setUsers(data);
            };

            const toggleActive = (userId) => {
                const updated = users.map(u => 
                    u.id === userId ? {...u, active: !u.active} : u
                );
                localStorage.setItem('foloneo_users', JSON.stringify(updated));
                setUsers(updated);
            };

            if (currentUser.role !== 'admin') {
                return (
                    <div className="space-y-6">
                        <div className="flex items-center justify-between">
                            <h2 className="text-2xl font-bold text-gray-800">üë• Gestion Utilisateurs</h2>
                            <button onClick={onBack} className="back-button">
                                ‚Üê Retour
                            </button>
                        </div>
                        <div className="bg-white p-6 rounded-xl shadow-lg">
                            <div className="text-center text-gray-600">
                                Acc√®s r√©serv√© aux administrateurs
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="space-y-6">
                    <div className="flex items-center justify-between">
                        <h2 className="text-2xl font-bold text-gray-800">üë• Gestion Utilisateurs</h2>
                        <button onClick={onBack} className="back-button">
                            ‚Üê Retour
                        </button>
                    </div>
                    
                    <div className="space-y-3">
                        {users.map(user => (
                            <div key={user.id} className="bg-white p-4 rounded-xl shadow-lg">
                                <div className="flex justify-between items-center">
                                    <div>
                                        <div className="font-bold text-gray-800">
                                            {user.username}
                                            {user.role === 'admin' && <span className="ml-2 text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded">ADMIN</span>}
                                        </div>
                                        <div className="text-sm text-gray-600">{user.email}</div>
                                        <div className="text-xs text-gray-500">
                                            Cr√©√© le {new Date(user.createdAt).toLocaleDateString('fr-FR')}
                                        </div>
                                    </div>
                                    {user.id !== '1' && (
                                        <button
                                            onClick={() => toggleActive(user.id)}
                                            className={`px-4 py-2 rounded-lg font-semibold ${
                                                user.active 
                                                ? 'bg-green-100 text-green-700' 
                                                : 'bg-red-100 text-red-700'
                                            }`}
                                        >
                                            {user.active ? 'üü¢ Actif' : 'üî¥ Inactif'}
                                        </button>
                                    )}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Cr√©ation de compte (depuis le menu)
        function RegisterPage({ onBack }) {
            const [username, setUsername] = useState('');
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');
            const [error, setError] = useState('');
            const [success, setSuccess] = useState('');

            const handleRegister = (e) => {
                e.preventDefault();
                setError('');
                setSuccess('');

                if (!username || !email || !password || !confirmPassword) {
                    setError('Tous les champs sont obligatoires');
                    return;
                }

                if (password !== confirmPassword) {
                    setError('Les mots de passe ne correspondent pas');
                    return;
                }

                if (password.length < 6) {
                    setError('Minimum 6 caract√®res');
                    return;
                }

                const users = JSON.parse(localStorage.getItem('foloneo_users') || '[]');

                if (users.find(u => u.username.toLowerCase() === username.toLowerCase())) {
                    setError('Identifiant d√©j√† utilis√©');
                    return;
                }

                const newUser = {
                    id: Date.now().toString(),
                    username,
                    password,
                    email,
                    role: 'user',
                    active: true,
                    createdAt: new Date().toISOString()
                };

                users.push(newUser);
                localStorage.setItem('foloneo_users', JSON.stringify(users));

                setSuccess('Compte cr√©√© avec succ√®s !');
                setUsername('');
                setPassword('');
                setConfirmPassword('');
                setEmail('');

                setTimeout(() => {
                    onBack();
                }, 1200);
            };

            return (
                <div className="space-y-6">
                    <div className="flex items-center justify-between">
                        <div>
                            <p className="text-sm uppercase tracking-[0.2em] text-blue-200">Espace utilisateurs</p>
                            <h2 className="text-3xl font-bold text-white">Cr√©er un nouveau compte</h2>
                            <p className="text-blue-100 mt-1">Disponible directement depuis le menu pour plus de simplicit√©.</p>
                        </div>
                        <button onClick={onBack} className="back-button">‚Üê Retour</button>
                    </div>

                    <div className="neo-card p-8">
                        <div className="flex items-center gap-3 mb-6">
                            <div className="w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center text-2xl text-white">‚ûï</div>
                            <div>
                                <h3 className="text-xl font-semibold text-white">Invitez un nouvel utilisateur</h3>
                                <p className="text-blue-100 text-sm">Les comptes cr√©√©s ici seront pr√™ts √† se connecter imm√©diatement.</p>
                            </div>
                        </div>

                        <form onSubmit={handleRegister} className="space-y-5">
                            <div>
                                <label className="block text-sm font-semibold text-blue-100 mb-2">Identifiant</label>
                                <input
                                    type="text"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    className="w-full px-4 py-3 bg-white/90 text-gray-800 rounded-xl focus:ring-4 focus:ring-blue-400 outline-none"
                                    placeholder="ex: technicien01"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold text-blue-100 mb-2">Email</label>
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    className="w-full px-4 py-3 bg-white/90 text-gray-800 rounded-xl focus:ring-4 focus:ring-blue-400 outline-none"
                                    placeholder="prenom@entreprise.fr"
                                    required
                                />
                            </div>

                            <div className="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-semibold text-blue-100 mb-2">Mot de passe</label>
                                    <input
                                        type="password"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        className="w-full px-4 py-3 bg-white/90 text-gray-800 rounded-xl focus:ring-4 focus:ring-blue-400 outline-none"
                                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                        required
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-blue-100 mb-2">Confirmation</label>
                                    <input
                                        type="password"
                                        value={confirmPassword}
                                        onChange={(e) => setConfirmPassword(e.target.value)}
                                        className="w-full px-4 py-3 bg-white/90 text-gray-800 rounded-xl focus:ring-4 focus:ring-blue-400 outline-none"
                                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                        required
                                    />
                                </div>
                            </div>

                            {error && (
                                <div className="bg-red-500/10 border border-red-500/30 text-red-100 px-4 py-3 rounded-lg text-sm">
                                    {error}
                                </div>
                            )}

                            {success && (
                                <div className="bg-green-500/10 border border-green-500/30 text-green-100 px-4 py-3 rounded-lg text-sm">
                                    {success}
                                </div>
                            )}

                            <div className="flex items-center gap-3">
                                <button type="submit" className="pulse-button flex-1 text-base">Cr√©er le compte</button>
                                <button type="button" onClick={onBack} className="back-button">Annuler</button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        // Application principale
        function App() {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentPage, setCurrentPage] = useState('dashboard');
            const [showUserMenu, setShowUserMenu] = useState(false);
            const [ajaxProducts, setAjaxProducts] = useState([]);
            const [dahuaProducts, setDahuaProducts] = useState([]);
            const [quotes, setQuotes] = useState([]);

            useEffect(() => {
                initializeData();
                const stored = localStorage.getItem('foloneo_current_user');
                if (stored) {
                    setCurrentUser(JSON.parse(stored));
                }
                loadData();
            }, []);

            const loadData = () => {
                setAjaxProducts(JSON.parse(localStorage.getItem('foloneo_ajax_products') || '[]'));
                setDahuaProducts(JSON.parse(localStorage.getItem('foloneo_dahua_products') || '[]'));
                setQuotes(JSON.parse(localStorage.getItem('foloneo_quotes') || '[]'));
            };

            const handleNavigation = (page) => {
                setCurrentPage(page);
                setShowUserMenu(false);
            };

            const navItems = [
                { id: 'dashboard', label: 'Dashboard', icon: 'üìä' },
                { id: 'quotes', label: 'Devis', icon: 'üìù' },
                { id: 'products', label: 'Produits', icon: 'üì¶' },
                { id: 'register', label: 'Cr√©er un compte', icon: '‚ú®' },
                { id: 'users', label: 'Users', icon: 'üë•', adminOnly: true },
            ].filter(item => !item.adminOnly || currentUser.role === 'admin');

            const handleLogout = () => {
                localStorage.removeItem('foloneo_current_user');
                setCurrentUser(null);
                setShowUserMenu(false);
            };

            const saveQuote = (quote) => {
                const allQuotes = JSON.parse(localStorage.getItem('foloneo_quotes') || '[]');
                allQuotes.push(quote);
                localStorage.setItem('foloneo_quotes', JSON.stringify(allQuotes));
                setQuotes(allQuotes);
                setCurrentPage('dashboard');
                alert('‚úÖ Devis enregistr√© avec succ√®s !');
            };

            const goToDashboard = () => {
                setCurrentPage('dashboard');
            };

            if (!currentUser) {
                return <LoginScreen onLogin={setCurrentUser} />;
            }

            return (
                <div className="min-h-screen text-white">
                    {/* Header */}
                    <div className="foloneo-gradient text-white p-6 shadow-lg sticky top-0 z-40 backdrop-blur">
                        <div className="max-w-7xl mx-auto space-y-4">
                            <div className="flex justify-between items-center">
                                <div className="flex items-center space-x-3 cursor-pointer" onClick={goToDashboard}>
                                    <div className="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg">
                                        <span className="text-2xl font-bold text-blue-600">F</span>
                                    </div>
                                    <div>
                                        <h1 className="text-xl font-bold">Foloneo</h1>
                                        <p className="text-sm opacity-90 hide-mobile">G√©n√©rateur de Devis Pro</p>
                                    </div>
                                </div>

                                <div className="relative">
                                    <button
                                        onClick={() => setShowUserMenu(!showUserMenu)}
                                        className="flex items-center space-x-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition backdrop-blur"
                                    >
                                        <div className="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow">
                                            <span className="text-blue-600 font-bold">{currentUser.username[0].toUpperCase()}</span>
                                        </div>
                                        <div className="text-left hide-mobile">
                                            <div className="text-sm font-semibold">{currentUser.username}</div>
                                            <div className="text-xs opacity-75">{currentUser.role === 'admin' ? 'Admin' : 'User'}</div>
                                        </div>
                                    </button>

                                    {showUserMenu && (
                                        <div className="absolute right-0 mt-3 w-56 bg-white rounded-2xl shadow-2xl z-50 overflow-hidden">
                                            <div className="p-4 border-b">
                                                <div className="font-semibold text-gray-800">{currentUser.username}</div>
                                                <div className="text-xs text-gray-600">{currentUser.email}</div>
                                            </div>
                                            <button
                                                onClick={() => handleNavigation('register')}
                                                className="w-full text-left px-4 py-2 text-gray-800 hover:bg-blue-50"
                                            >
                                                ‚ú® Cr√©er un compte
                                            </button>
                                            <button
                                                onClick={handleLogout}
                                                className="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50"
                                            >
                                                üö™ D√©connexion
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>

                            <div className="hidden md:flex items-center gap-2">
                                {navItems.map(item => (
                                    <button
                                        key={item.id}
                                        onClick={() => handleNavigation(item.id)}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-xl transition ${currentPage === item.id ? 'bg-white text-blue-700 shadow-lg' : 'bg-white/10 text-white hover:bg-white/20'}`}
                                    >
                                        <span>{item.icon}</span>
                                        <span className="font-semibold">{item.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Contenu */}
                    <div className="max-w-7xl mx-auto p-4 content-with-mobile-menu space-y-6">
                        {currentPage === 'dashboard' && <Dashboard quotes={quotes} />}
                        {currentPage === 'quotes' && <QuoteCreator ajaxProducts={ajaxProducts} dahuaProducts={dahuaProducts} onSave={saveQuote} onBack={goToDashboard} />}
                        {currentPage === 'products' && <ProductsManager ajaxProducts={ajaxProducts} dahuaProducts={dahuaProducts} onUpdate={loadData} onBack={goToDashboard} />}
                        {currentPage === 'users' && <UsersManager currentUser={currentUser} onBack={goToDashboard} />}
                        {currentPage === 'register' && <RegisterPage onBack={goToDashboard} />}
                    </div>

                    {/* Menu mobile */}
                    <div className="mobile-menu">
                        <div className="flex justify-around max-w-7xl mx-auto">
                            {navItems.map(item => (
                                <button
                                    key={item.id}
                                    onClick={() => handleNavigation(item.id)}
                                    className={`flex flex-col items-center py-2 px-3 ${currentPage === item.id ? 'text-blue-600' : 'text-gray-600'}`}
                                >
                                    <span className="text-2xl">{item.icon}</span>
                                    <span className="text-xs mt-1 text-center">{item.label}</span>
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
